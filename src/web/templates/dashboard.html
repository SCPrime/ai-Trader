<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Trading Bot Dashboard</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¤–</text></svg>">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>

    <!-- Custom CSS -->
    <link href="/static/css/dashboard.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-robot"></i> AI Trading Bot
            </a>

            <!-- Trading Mode Toggle -->
            <div class="navbar-nav me-auto">
                <div class="nav-item">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="tradingModeToggle"
                               {% if is_live_trading %}checked{% endif %}>
                        <label class="form-check-label text-light" for="tradingModeToggle">
                            <span id="tradingModeLabel">
                                {% if is_live_trading %}Live Trading{% else %}Paper Trading{% endif %}
                            </span>
                        </label>
                    </div>
                </div>

                <div class="nav-item ms-3">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="aiModeToggle"
                               {% if is_ai_auto_mode %}checked{% endif %}>
                        <label class="form-check-label text-light" for="aiModeToggle">
                            <span id="aiModeLabel">
                                {% if is_ai_auto_mode %}AI Auto{% else %}Manual{% endif %}
                            </span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Connection Status -->
            <div class="navbar-nav">
                <div class="nav-item">
                    <span class="badge bg-success" id="connectionStatus">
                        <i class="fas fa-circle"></i> Connected
                    </span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid mt-3">
        <!-- Dashboard Cards -->
        <div class="row mb-4">
            <!-- Portfolio Value -->
            <div class="col-md-3">
                <div class="card bg-primary text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h6 class="card-title">Portfolio Value</h6>
                                <h4 id="portfolioValue">Loading...</h4>
                                <small id="portfolioChange">--</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-chart-line fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Buying Power -->
            <div class="col-md-3">
                <div class="card bg-success text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h6 class="card-title">Buying Power</h6>
                                <h4 id="buyingPower">Loading...</h4>
                                <small>Available Cash</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-dollar-sign fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Active Positions -->
            <div class="col-md-3">
                <div class="card bg-info text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h6 class="card-title">Active Positions</h6>
                                <h4 id="activePositions">Loading...</h4>
                                <small>Open Trades</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-briefcase fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Health -->
            <div class="col-md-3">
                <div class="card bg-warning text-white">
                    <div class="card-body">
                        <div class="d-flex justify-content-between">
                            <div>
                                <h6 class="card-title">System Health</h6>
                                <h4 id="systemHealth">Loading...</h4>
                                <small>All Systems</small>
                            </div>
                            <div class="align-self-center">
                                <i class="fas fa-heartbeat fa-2x"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Trading Interface -->
        <div class="row">
            <!-- Chart Panel -->
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-chart-candlestick"></i> Price Chart
                            </h5>
                            <div class="input-group" style="width: 200px;">
                                <input type="text" class="form-control" id="symbolInput"
                                       placeholder="Symbol" value="AAPL">
                                <button class="btn btn-outline-primary" type="button" id="loadChart">
                                    Load
                                </button>
                            </div>
                            <div id="currentPrice" class="mt-2 small text-success">
                                <i class="fas fa-chart-line"></i> <span id="priceDisplay">Real-time data loading...</span>
                            </div>
                            <div id="dataSource" class="mt-1 small text-muted">
                                <i class="fas fa-database"></i> <span id="sourceDisplay">Yahoo Finance API</span>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="chartContainer" style="height: 600px;">
                            <div class="d-flex justify-content-center align-items-center h-100">
                                <div class="spinner-border" role="status">
                                    <span class="visually-hidden">Loading chart...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Control Panel -->
            <div class="col-lg-4">
                <!-- AI Analysis Panel -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-brain"></i> AI Analysis
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="aiAnalysis">
                            <div class="text-center">
                                <button class="btn btn-primary" id="getAiAnalysis" disabled>
                                    <i class="fas fa-magic"></i> Get AI Analysis
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trading Panel -->
                <div class="card mb-3">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-exchange-alt"></i> Quick Trade
                        </h5>
                    </div>
                    <div class="card-body">
                        <form id="tradeForm">
                            <div class="mb-3">
                                <label for="tradeSymbol" class="form-label">Symbol</label>
                                <input type="text" class="form-control" id="tradeSymbol" value="AAPL">
                            </div>
                            <div class="mb-3">
                                <label for="tradeQuantity" class="form-label">Quantity</label>
                                <input type="number" class="form-control" id="tradeQuantity" value="10">
                            </div>
                            <div class="mb-3">
                                <label for="tradeType" class="form-label">Order Type</label>
                                <select class="form-select" id="tradeType">
                                    <option value="market">Market</option>
                                    <option value="limit">Limit</option>
                                </select>
                            </div>
                            <div class="d-grid gap-2">
                                <button type="button" class="btn btn-success" id="buyButton">
                                    <i class="fas fa-arrow-up"></i> Buy
                                </button>
                                <button type="button" class="btn btn-danger" id="sellButton">
                                    <i class="fas fa-arrow-down"></i> Sell
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Technical Indicators -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-chart-line"></i> Technical Indicators
                        </h5>
                    </div>
                    <div class="card-body">
                        <div id="technicalIndicators">
                            <div class="text-muted text-center">
                                Load a chart to see indicators
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Strategy and Settings Management -->
        <div class="row mt-4">
            <!-- Natural Language Strategy Interface -->
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-comments"></i> AI Strategy Creator
                        </h5>
                    </div>
                    <div class="card-body">
                        <form id="strategyForm">
                            <div class="mb-3">
                                <label for="strategyName" class="form-label">Strategy Name</label>
                                <input type="text" class="form-control" id="strategyName" placeholder="My Trading Strategy">
                            </div>
                            <div class="mb-3">
                                <label for="strategyDescription" class="form-label">Description</label>
                                <input type="text" class="form-control" id="strategyDescription" placeholder="Brief description">
                            </div>
                            <div class="mb-3">
                                <label for="strategyRules" class="form-label">Natural Language Rules</label>
                                <textarea class="form-control" id="strategyRules" rows="4"
                                    placeholder="Example: Buy AAPL when RSI drops below 30 and then crosses back above 35. Take profit at 3% gain. Stop loss at 2% loss. Use 2% position size."></textarea>
                            </div>
                            <div class="d-grid gap-2">
                                <button type="button" class="btn btn-primary" id="createStrategy">
                                    <i class="fas fa-plus"></i> Create Strategy
                                </button>
                                <button type="button" class="btn btn-outline-secondary" id="loadExamples">
                                    <i class="fas fa-lightbulb"></i> Load Examples
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Strategies Management -->
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-folder"></i> Saved Strategies
                        </h5>
                        <button class="btn btn-sm btn-outline-primary" id="refreshStrategies">
                            <i class="fas fa-sync"></i>
                        </button>
                    </div>
                    <div class="card-body" style="max-height: 400px; overflow-y: auto;">
                        <div id="strategiesList">
                            <div class="text-center text-muted">
                                <i class="fas fa-folder-open fa-2x mb-2"></i>
                                <p>No strategies saved yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Control Center -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-cog"></i> Trading Control Center
                            </h5>
                            <div>
                                <button class="btn btn-sm btn-outline-secondary me-2" id="loadPresets">
                                    <i class="fas fa-download"></i> Load Presets
                                </button>
                                <button class="btn btn-sm btn-warning" id="resetSettings">
                                    <i class="fas fa-undo"></i> Reset to Defaults
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- Risk Management -->
                            <div class="col-md-4">
                                <h6 class="text-primary">Risk Management</h6>
                                <div class="mb-3">
                                    <label for="positionSize" class="form-label">Position Size (%)</label>
                                    <input type="number" class="form-control form-control-sm" id="positionSize"
                                           step="0.01" min="0" max="100" value="2">
                                </div>
                                <div class="mb-3">
                                    <label for="stopLoss" class="form-label">Stop Loss (%)</label>
                                    <input type="number" class="form-control form-control-sm" id="stopLoss"
                                           step="0.01" min="0" max="50" value="2">
                                </div>
                                <div class="mb-3">
                                    <label for="takeProfit" class="form-label">Take Profit (%)</label>
                                    <input type="number" class="form-control form-control-sm" id="takeProfit"
                                           step="0.01" min="0" max="100" value="4">
                                </div>
                                <div class="mb-3">
                                    <label for="maxDailyLoss" class="form-label">Max Daily Loss (%)</label>
                                    <input type="number" class="form-control form-control-sm" id="maxDailyLoss"
                                           step="0.01" min="0" max="100" value="5">
                                </div>
                            </div>

                            <!-- Trading Behavior -->
                            <div class="col-md-4">
                                <h6 class="text-success">Trading Behavior</h6>
                                <div class="mb-3">
                                    <label for="maxPositions" class="form-label">Max Positions</label>
                                    <input type="number" class="form-control form-control-sm" id="maxPositions"
                                           min="1" max="50" value="5">
                                </div>
                                <div class="mb-3">
                                    <label for="maxDailyTrades" class="form-label">Max Daily Trades</label>
                                    <input type="number" class="form-control form-control-sm" id="maxDailyTrades"
                                           min="1" max="100" value="20">
                                </div>
                                <div class="mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="requireConfirmation" checked>
                                        <label class="form-check-label" for="requireConfirmation">
                                            Require Trade Confirmation
                                        </label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="enableTrailingStops">
                                        <label class="form-check-label" for="enableTrailingStops">
                                            Enable Trailing Stops
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- AI & Technical Settings -->
                            <div class="col-md-4">
                                <h6 class="text-info">AI & Technical</h6>
                                <div class="mb-3">
                                    <label for="aiConfidenceThreshold" class="form-label">AI Confidence Threshold</label>
                                    <input type="number" class="form-control form-control-sm" id="aiConfidenceThreshold"
                                           step="0.01" min="0" max="1" value="0.7">
                                </div>
                                <div class="mb-3">
                                    <label for="rsiPeriod" class="form-label">RSI Period</label>
                                    <input type="number" class="form-control form-control-sm" id="rsiPeriod"
                                           min="1" max="50" value="14">
                                </div>
                                <div class="mb-3">
                                    <label for="smaShort" class="form-label">Short SMA Period</label>
                                    <input type="number" class="form-control form-control-sm" id="smaShort"
                                           min="1" max="200" value="20">
                                </div>
                                <div class="mb-3">
                                    <label for="smaLong" class="form-label">Long SMA Period</label>
                                    <input type="number" class="form-control form-control-sm" id="smaLong"
                                           min="1" max="200" value="50">
                                </div>
                            </div>
                        </div>

                        <!-- Settings Actions -->
                        <div class="row">
                            <div class="col-12">
                                <hr>
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <button class="btn btn-success" id="saveSettings">
                                            <i class="fas fa-save"></i> Save Settings
                                        </button>
                                        <button class="btn btn-outline-primary ms-2" id="validateSettings">
                                            <i class="fas fa-check"></i> Validate
                                        </button>
                                    </div>
                                    <div id="settingsStatus" class="align-self-center">
                                        <small class="text-muted">Ready to configure</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Positions Dashboard -->
        <div class="row mt-4">
            <!-- Comprehensive Positions View -->
            <div class="col-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-chart-pie"></i> Portfolio Positions Snapshot
                        </h5>
                        <div>
                            <button class="btn btn-sm btn-outline-primary me-2" id="refreshPositions">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                            <span class="badge bg-info" id="lastUpdated">Last updated: --</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover" id="positionsTable">
                                <thead class="table-dark">
                                    <tr>
                                        <th class="text-center">Symbol</th>
                                        <th class="text-center">Type</th>
                                        <th class="text-center">Qty</th>
                                        <th class="text-center">Avg Price</th>
                                        <th class="text-center">Current Price</th>
                                        <th class="text-center">Market Value</th>
                                        <th class="text-center">Day P&L</th>
                                        <th class="text-center">Day P&L %</th>
                                        <th class="text-center">Total P&L</th>
                                        <th class="text-center">Total P&L %</th>
                                        <th class="text-center">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="11" class="text-center text-muted py-4">
                                            <div class="spinner-border spinner-border-sm me-2" role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                            Loading positions...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- No Positions State -->
                        <div id="noPositionsMessage" class="text-center py-5" style="display: none;">
                            <div class="text-muted">
                                <i class="fas fa-chart-line fa-3x mb-3"></i>
                                <h5>No Open Positions</h5>
                                <p>Start trading to see your positions here</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Stats and Orders -->
        <div class="row mt-4">
            <!-- Portfolio Summary -->
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-calculator"></i> Portfolio Summary
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-12 mb-3">
                                <div class="border rounded p-3 bg-light">
                                    <small class="text-muted">Total Portfolio Value</small>
                                    <h4 class="mb-0 text-primary" id="totalPortfolioValue">$10,000.00</h4>
                                    <small class="text-success" id="portfolioChange">+2.5% ($250.00)</small>
                                </div>
                            </div>
                            <div class="col-6 mb-2">
                                <div class="border rounded p-2">
                                    <small class="text-muted">Day P&L</small>
                                    <h6 class="mb-0 text-success" id="totalDayPnL">+$125.50</h6>
                                </div>
                            </div>
                            <div class="col-6 mb-2">
                                <div class="border rounded p-2">
                                    <small class="text-muted">Unrealized P&L</small>
                                    <h6 class="mb-0 text-warning" id="totalUnrealizedPnL">+$85.20</h6>
                                </div>
                            </div>
                            <div class="col-6 mb-2">
                                <div class="border rounded p-2">
                                    <small class="text-muted">Options Premium</small>
                                    <h6 class="mb-0 text-info" id="optionsPremium">$245.75</h6>
                                </div>
                            </div>
                            <div class="col-6 mb-2">
                                <div class="border rounded p-2">
                                    <small class="text-muted">Buying Power</small>
                                    <h6 class="mb-0 text-secondary" id="availableBuyingPower">$7,824.30</h6>
                                </div>
                            </div>
                            <div class="col-6 mb-2">
                                <div class="border rounded p-2">
                                    <small class="text-muted">Active Positions</small>
                                    <h6 class="mb-0" id="activePositionsCount">8</h6>
                                </div>
                            </div>
                            <div class="col-6 mb-2">
                                <div class="border rounded p-2">
                                    <small class="text-muted">Win Rate</small>
                                    <h6 class="mb-0 text-success" id="winRate">78.5%</h6>
                                </div>
                            </div>
                            <div class="col-12 mt-2">
                                <div class="border rounded p-2">
                                    <small class="text-muted">Today's Strategy Performance</small>
                                    <div class="progress mt-1" style="height: 8px;">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 78%" id="todayPerformanceBar"></div>
                                    </div>
                                    <small class="text-success" id="todayPerformanceText">78% Success Rate (7/9 trades)</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Orders -->
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-history"></i> Recent Orders
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm" id="ordersTable">
                                <thead>
                                    <tr>
                                        <th>Time</th>
                                        <th>Symbol</th>
                                        <th>Side</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="6" class="text-center text-muted">
                                            Loading orders...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Strategy Management & Testing Section -->
        <div class="row mt-4">
            <!-- Strategy Selection & Actions -->
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-chess"></i> Strategy Management
                        </h5>
                    </div>
                    <div class="card-body">
                        <!-- Strategy Selection -->
                        <div class="mb-3">
                            <label for="strategySelect" class="form-label">Choose Strategy</label>
                            <select class="form-select" id="strategySelect">
                                <option value="">Loading strategies...</option>
                            </select>
                            <small class="text-muted">Includes your saved custom strategies</small>
                        </div>

                        <!-- Symbols Selection -->
                        <div class="mb-3">
                            <label for="strategySymbols" class="form-label">Test Symbols</label>
                            <input type="text" class="form-control" id="strategySymbols"
                                   placeholder="AAPL,MSFT,GOOGL,TSLA,AMZN"
                                   value="AAPL,MSFT,GOOGL,TSLA,AMZN">
                            <small class="text-muted">Comma-separated symbols</small>
                        </div>

                        <!-- Allocation -->
                        <div class="mb-3">
                            <label for="allocationAmount" class="form-label">Allocation ($)</label>
                            <input type="number" class="form-control" id="allocationAmount"
                                   value="1000" min="100" step="100">
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" id="strategizeBtn">
                                <i class="fas fa-search"></i> Strategize (Test Market)
                            </button>
                            <button class="btn btn-success" id="implementStrategyBtn" disabled>
                                <i class="fas fa-play"></i> Implement Strategy
                            </button>
                            <button class="btn btn-info" id="viewActiveStrategies">
                                <i class="fas fa-eye"></i> View Active Strategies
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Strategy Results Table -->
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-chart-bar"></i> Strategy Universe
                        </h5>
                        <div>
                            <span class="badge bg-secondary" id="strategyStatus">Ready</span>
                            <span class="badge bg-info" id="lastStrategyUpdate">--</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <!-- Strategy Results Loading State -->
                        <div id="strategyResultsLoading" class="text-center py-4" style="display: none;">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Testing strategy...</span>
                            </div>
                            <div class="mt-2"><strong>Running strategy analysis...</strong></div>
                            <div class="small text-muted">Testing against live market data</div>
                        </div>

                        <!-- Strategy Results Table -->
                        <div class="table-responsive" id="strategyResultsContainer">
                            <table class="table table-hover" id="strategyResultsTable">
                                <thead class="table-dark">
                                    <tr>
                                        <th class="text-center">Symbol</th>
                                        <th class="text-center">Current Price</th>
                                        <th class="text-center">Signal</th>
                                        <th class="text-center">Confidence</th>
                                        <th class="text-center">Action</th>
                                        <th class="text-center">Est. Profit</th>
                                        <th class="text-center">Total Cost</th>
                                        <th class="text-center">ROI</th>
                                        <th class="text-center">Reasoning</th>
                                        <th class="text-center">Investment Details</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="10" class="text-center text-muted py-4">
                                            Select a strategy and click "Strategize" to test against live market data
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <!-- Selection Totals -->
                            <div id="selectionTotals" class="mt-3 p-3 bg-light border rounded">
                                <div class="row text-center">
                                    <div class="col-md-3">
                                        <div class="border rounded p-2">
                                            <h6 class="mb-1">Selected</h6>
                                            <strong class="text-primary">0 positions</strong>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="border rounded p-2">
                                            <h6 class="mb-1">Total Cost</h6>
                                            <strong class="text-danger">$0</strong>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="border rounded p-2">
                                            <h6 class="mb-1">Est. Profit</h6>
                                            <strong class="text-success">$0.00</strong>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="border rounded p-2">
                                            <h6 class="mb-1">Avg ROI</h6>
                                            <strong class="text-success">0.0%</strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Strategy Performance Summary -->
                        <div id="strategyPerformanceSummary" class="mt-3" style="display: none;">
                            <div class="row text-center">
                                <div class="col-3">
                                    <div class="border rounded p-2">
                                        <small class="text-muted">Buy Signals</small>
                                        <h6 class="mb-0 text-success" id="buySignalsCount">0</h6>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="border rounded p-2">
                                        <small class="text-muted">Sell Signals</small>
                                        <h6 class="mb-0 text-danger" id="sellSignalsCount">0</h6>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="border rounded p-2">
                                        <small class="text-muted">Hold Signals</small>
                                        <h6 class="mb-0 text-warning" id="holdSignalsCount">0</h6>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="border rounded p-2">
                                        <small class="text-muted">Avg Confidence</small>
                                        <h6 class="mb-0 text-info" id="avgConfidence">0%</h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Active Strategies Monitoring -->
        <div class="row mt-4" id="activeStrategiesSection" style="display: none;">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-cogs"></i> Active Trading Strategies
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped" id="activeStrategiesTable">
                                <thead>
                                    <tr>
                                        <th>Strategy</th>
                                        <th>Status</th>
                                        <th>Symbols</th>
                                        <th>Allocation</th>
                                        <th>Total Trades</th>
                                        <th>P&L</th>
                                        <th>Win Rate</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="8" class="text-center text-muted">
                                            No active strategies
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toastContainer">
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="/static/js/dashboard.js"></script>
</body>
</html>